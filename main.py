import random
import requests
import logging
from datetime import datetime, timedelta
from telegram import Update
from telegram.ext import Updater, CommandHandler, CallbackContext

BOT_TOKEN = "7882447585:AAFRX4Q6eqhN5uoJvv45O3ACrY7fvFFF2nI"
ADMIN_ID = 6212199357

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# ╪г╪░┘Г╪з╪▒ (┘Ж┘Б╪│ ╪з┘Д┘В┘И╪з╪ж┘Е ╪з┘Д╪│╪з╪и┘В╪й)
MORNING_ADHKAR = [
    "╪г╪╡╪и╪н┘Ж╪з ┘И╪г╪╡╪и╪н ╪з┘Д┘Е┘Д┘Г ┘Д┘Д┘З╪М ┘И╪з┘Д╪н┘Е╪п ┘Д┘Д┘З╪М ┘Д╪з ╪е┘Д┘З ╪е┘Д╪з ╪з┘Д┘Д┘З ┘И╪н╪п┘З ┘Д╪з ╪┤╪▒┘К┘Г ┘Д┘З╪М ┘Д┘З ╪з┘Д┘Е┘Д┘Г ┘И┘Д┘З ╪з┘Д╪н┘Е╪п ┘И┘З┘И ╪╣┘Д┘Й ┘Г┘Д ╪┤┘К╪б ┘В╪п┘К╪▒.",
    "╪з┘Д┘Д┘З┘Е ╪и┘Г ╪г╪╡╪и╪н┘Ж╪з╪М ┘И╪и┘Г ╪г┘Е╪│┘К┘Ж╪з╪М ┘И╪и┘Г ┘Ж╪н┘К╪з╪М ┘И╪и┘Г ┘Ж┘Е┘И╪к╪М ┘И╪е┘Д┘К┘Г ╪з┘Д┘Ж╪┤┘И╪▒.",
    "╪│╪и╪н╪з┘Ж ╪з┘Д┘Д┘З ┘И╪и╪н┘Е╪п┘З ╪╣╪п╪п ╪о┘Д┘В┘З ┘И╪▒╪╢╪з ┘Ж┘Б╪│┘З ┘И╪▓┘Ж╪й ╪╣╪▒╪┤┘З ┘И┘Е╪п╪з╪п ┘Г┘Д┘Е╪з╪к┘З.",
    "╪з┘Д┘Д┘З┘Е ╪е┘Ж┘К ╪г╪╡╪и╪н╪к ┘Е┘Ж┘Г ┘Б┘К ┘Ж╪╣┘Е╪й ┘И╪╣╪з┘Б┘К╪й ┘И╪│╪к╪▒╪М ┘Б╪г╪к┘Е ┘Ж╪╣┘Е╪к┘Г ╪╣┘Д┘К ┘И╪╣╪з┘Б┘К╪к┘Г ┘И╪│╪к╪▒┘Г ┘Б┘К ╪з┘Д╪п┘Ж┘К╪з ┘И╪з┘Д╪в╪о╪▒╪й.",
    "╪г╪╡╪и╪н┘Ж╪з ╪╣┘Д┘Й ┘Б╪╖╪▒╪й ╪з┘Д╪е╪│┘Д╪з┘Е╪М ┘И┘Г┘Д┘Е╪й ╪з┘Д╪е╪о┘Д╪з╪╡╪М ┘И╪п┘К┘Ж ┘Ж╪и┘К┘Ж╪з ┘Е╪н┘Е╪п ╪╡┘Д┘Й ╪з┘Д┘Д┘З ╪╣┘Д┘К┘З ┘И╪│┘Д┘Е╪М ┘И┘Е┘Д╪й ╪г╪и┘К┘Ж╪з ╪е╪и╪▒╪з┘З┘К┘Е ╪н┘Ж┘К┘Б╪з┘Л ┘Е╪│┘Д┘Е╪з┘Л ┘И┘Е╪з ┘Г╪з┘Ж ┘Е┘Ж ╪з┘Д┘Е╪┤╪▒┘Г┘К┘Ж.",
    "╪з┘Д┘Д┘З┘Е ┘Е╪з ╪г╪╡╪и╪н ╪и┘К ┘Е┘Ж ┘Ж╪╣┘Е╪й ╪г┘И ╪и╪г╪н╪п ┘Е┘Ж ╪о┘Д┘В┘Г ┘Б┘Е┘Ж┘Г ┘И╪н╪п┘Г ┘Д╪з ╪┤╪▒┘К┘Г ┘Д┘Г╪М ┘Б┘Д┘Г ╪з┘Д╪н┘Е╪п ┘И┘Д┘Г ╪з┘Д╪┤┘Г╪▒.",
    "╪н╪│╪и┘К ╪з┘Д┘Д┘З ┘Д╪з ╪е┘Д┘З ╪е┘Д╪з ┘З┘И╪М ╪╣┘Д┘К┘З ╪к┘И┘Г┘Д╪к ┘И┘З┘И ╪▒╪и ╪з┘Д╪╣╪▒╪┤ ╪з┘Д╪╣╪╕┘К┘Е.",
    "╪з┘Д┘Д┘З┘Е ╪е┘Ж┘К ╪г╪│╪г┘Д┘Г ╪╣┘Д┘Е╪з┘Л ┘Ж╪з┘Б╪╣╪з┘Л╪М ┘И╪▒╪▓┘В╪з┘Л ╪╖┘К╪и╪з┘Л╪М ┘И╪╣┘Е┘Д╪з┘Л ┘Е╪к┘В╪и┘Д╪з┘Л.",
    "╪│╪и╪н╪з┘Ж ╪з┘Д┘Д┘З ╪з┘Д╪╣╪╕┘К┘Е ┘И╪и╪н┘Е╪п┘З╪М ┘Д╪з ╪е┘Д┘З ╪е┘Д╪з ╪з┘Д┘Д┘З ┘И╪н╪п┘З ┘Д╪з ╪┤╪▒┘К┘Г ┘Д┘З╪М ┘Д┘З ╪з┘Д┘Е┘Д┘Г ┘И┘Д┘З ╪з┘Д╪н┘Е╪п ┘И┘З┘И ╪╣┘Д┘Й ┘Г┘Д ╪┤┘К╪б ┘В╪п┘К╪▒.",
    "╪г╪╣┘И╪░ ╪и┘Г┘Д┘Е╪з╪к ╪з┘Д┘Д┘З ╪з┘Д╪к╪з┘Е╪з╪к ┘Е┘Ж ╪┤╪▒ ┘Е╪з ╪о┘Д┘В."
]

EVENING_ADHKAR = [
    "╪г┘Е╪│┘К┘Ж╪з ┘И╪г┘Е╪│┘Й ╪з┘Д┘Е┘Д┘Г ┘Д┘Д┘З╪М ┘И╪з┘Д╪н┘Е╪п ┘Д┘Д┘З╪М ┘Д╪з ╪е┘Д┘З ╪е┘Д╪з ╪з┘Д┘Д┘З ┘И╪н╪п┘З ┘Д╪з ╪┤╪▒┘К┘Г ┘Д┘З╪М ┘Д┘З ╪з┘Д┘Е┘Д┘Г ┘И┘Д┘З ╪з┘Д╪н┘Е╪п ┘И┘З┘И ╪╣┘Д┘Й ┘Г┘Д ╪┤┘К╪б ┘В╪п┘К╪▒.",
    "╪з┘Д┘Д┘З┘Е ╪и┘Г ╪г┘Е╪│┘К┘Ж╪з╪М ┘И╪и┘Г ╪г╪╡╪и╪н┘Ж╪з╪М ┘И╪и┘Г ┘Ж╪н┘К╪з╪М ┘И╪и┘Г ┘Ж┘Е┘И╪к╪М ┘И╪е┘Д┘К┘Г ╪з┘Д┘Е╪╡┘К╪▒.",
    "╪г╪╣┘И╪░ ╪и┘Г┘Д┘Е╪з╪к ╪з┘Д┘Д┘З ╪з┘Д╪к╪з┘Е╪з╪к ┘Е┘Ж ╪┤╪▒ ┘Е╪з ╪о┘Д┘В.",
    "╪з┘Д┘Д┘З┘Е ╪е┘Ж┘К ╪г┘Е╪│┘К╪к ┘Е┘Ж┘Г ┘Б┘К ┘Ж╪╣┘Е╪й ┘И╪╣╪з┘Б┘К╪й ┘И╪│╪к╪▒╪М ┘Б╪г╪к┘Е ┘Ж╪╣┘Е╪к┘Г ╪╣┘Д┘К ┘И╪╣╪з┘Б┘К╪к┘Г ┘И╪│╪к╪▒┘Г ┘Б┘К ╪з┘Д╪п┘Ж┘К╪з ┘И╪з┘Д╪в╪о╪▒╪й.",
    "╪г┘Е╪│┘К┘Ж╪з ╪╣┘Д┘Й ┘Б╪╖╪▒╪й ╪з┘Д╪е╪│┘Д╪з┘Е╪М ┘И┘Г┘Д┘Е╪й ╪з┘Д╪е╪о┘Д╪з╪╡╪М ┘И╪п┘К┘Ж ┘Ж╪и┘К┘Ж╪з ┘Е╪н┘Е╪п ╪╡┘Д┘Й ╪з┘Д┘Д┘З ╪╣┘Д┘К┘З ┘И╪│┘Д┘Е╪М ┘И┘Е┘Д╪й ╪г╪и┘К┘Ж╪з ╪е╪и╪▒╪з┘З┘К┘Е ╪н┘Ж┘К┘Б╪з┘Л ┘Е╪│┘Д┘Е╪з┘Л ┘И┘Е╪з ┘Г╪з┘Ж ┘Е┘Ж ╪з┘Д┘Е╪┤╪▒┘Г┘К┘Ж.",
    "╪з┘Д┘Д┘З┘Е ┘Е╪з ╪г┘Е╪│┘Й ╪и┘К ┘Е┘Ж ┘Ж╪╣┘Е╪й ╪г┘И ╪и╪г╪н╪п ┘Е┘Ж ╪о┘Д┘В┘Г ┘Б┘Е┘Ж┘Г ┘И╪н╪п┘Г ┘Д╪з ╪┤╪▒┘К┘Г ┘Д┘Г╪М ┘Б┘Д┘Г ╪з┘Д╪н┘Е╪п ┘И┘Д┘Г ╪з┘Д╪┤┘Г╪▒.",
    "╪н╪│╪и┘К ╪з┘Д┘Д┘З ┘Д╪з ╪е┘Д┘З ╪е┘Д╪з ┘З┘И╪М ╪╣┘Д┘К┘З ╪к┘И┘Г┘Д╪к ┘И┘З┘И ╪▒╪и ╪з┘Д╪╣╪▒╪┤ ╪з┘Д╪╣╪╕┘К┘Е.",
    "╪з┘Д┘Д┘З┘Е ╪е┘Ж┘К ╪г╪│╪г┘Д┘Г ╪з┘Д╪╣┘Б┘И ┘И╪з┘Д╪╣╪з┘Б┘К╪й ┘Б┘К ╪з┘Д╪п┘Ж┘К╪з ┘И╪з┘Д╪в╪о╪▒╪й╪М ╪з┘Д┘Д┘З┘Е ╪е┘Ж┘К ╪г╪│╪г┘Д┘Г ╪з┘Д╪╣┘Б┘И ┘И╪з┘Д╪╣╪з┘Б┘К╪й ┘Б┘К ╪п┘К┘Ж┘К ┘И╪п┘Ж┘К╪з┘К ┘И╪г┘З┘Д┘К ┘И┘Е╪з┘Д┘К.",
    "╪│╪и╪н╪з┘Ж ╪з┘Д┘Д┘З ╪з┘Д╪╣╪╕┘К┘Е ┘И╪и╪н┘Е╪п┘З╪М ┘Д╪з ╪е┘Д┘З ╪е┘Д╪з ╪з┘Д┘Д┘З ┘И╪н╪п┘З ┘Д╪з ╪┤╪▒┘К┘Г ┘Д┘З╪М ┘Д┘З ╪з┘Д┘Е┘Д┘Г ┘И┘Д┘З ╪з┘Д╪н┘Е╪п ┘И┘З┘И ╪╣┘Д┘Й ┘Г┘Д ╪┤┘К╪б ┘В╪п┘К╪▒.",
    "╪г╪╣┘И╪░ ╪и╪з┘Д┘Д┘З ┘Е┘Ж ╪з┘Д╪┤┘К╪╖╪з┘Ж ╪з┘Д╪▒╪м┘К┘Е: {╪в┘К╪й ╪з┘Д┘Г╪▒╪│┘К}"
]

NIGHT_ADHKAR = [
    "╪и╪з╪│┘Е ╪з┘Д┘Д┘З ╪з┘Д╪░┘К ┘Д╪з ┘К╪╢╪▒ ┘Е╪╣ ╪з╪│┘Е┘З ╪┤┘К╪б ┘Б┘К ╪з┘Д╪г╪▒╪╢ ┘И┘Д╪з ┘Б┘К ╪з┘Д╪│┘Е╪з╪б ┘И┘З┘И ╪з┘Д╪│┘Е┘К╪╣ ╪з┘Д╪╣┘Д┘К┘Е.",
    "╪в┘К╪й ╪з┘Д┘Г╪▒╪│┘К: ╪з┘Д┘Д┘З ┘Д╪з ╪е┘Д┘З ╪е┘Д╪з ┘З┘И ╪з┘Д╪н┘К ╪з┘Д┘В┘К┘И┘Е ┘Д╪з ╪к╪г╪о╪░┘З ╪│┘Ж╪й ┘И┘Д╪з ┘Ж┘И┘Е ┘Д┘З ┘Е╪з ┘Б┘К ╪з┘Д╪│┘Е╪з┘И╪з╪к ┘И┘Е╪з ┘Б┘К ╪з┘Д╪г╪▒╪╢...",
    "╪г╪╣┘И╪░ ╪и╪▒╪и ╪з┘Д┘Б┘Д┘В╪М ┘Е┘Ж ╪┤╪▒ ┘Е╪з ╪о┘Д┘В╪М ┘И┘Е┘Ж ╪┤╪▒ ╪║╪з╪│┘В ╪е╪░╪з ┘И┘В╪и╪М ┘И┘Е┘Ж ╪┤╪▒ ╪з┘Д┘Ж┘Б╪з╪л╪з╪к ┘Б┘К ╪з┘Д╪╣┘В╪п╪М ┘И┘Е┘Ж ╪┤╪▒ ╪н╪з╪│╪п ╪е╪░╪з ╪н╪│╪п.",
    "╪г╪╣┘И╪░ ╪и╪▒╪и ╪з┘Д┘Ж╪з╪│╪М ┘Е┘Д┘Г ╪з┘Д┘Ж╪з╪│╪М ╪е┘Д┘З ╪з┘Д┘Ж╪з╪│╪М ┘Е┘Ж ╪┤╪▒ ╪з┘Д┘И╪│┘И╪з╪│ ╪з┘Д╪о┘Ж╪з╪│╪М ╪з┘Д╪░┘К ┘К┘И╪│┘И╪│ ┘Б┘К ╪╡╪п┘И╪▒ ╪з┘Д┘Ж╪з╪│╪М ┘Е┘Ж ╪з┘Д╪м┘Ж╪й ┘И╪з┘Д┘Ж╪з╪│.",
    "╪з┘Д┘Д┘З┘Е ╪▒╪и ╪з┘Д╪│┘Е╪з┘И╪з╪к ┘И╪▒╪и ╪з┘Д╪г╪▒╪╢ ┘И╪▒╪и ╪з┘Д╪╣╪▒╪┤ ╪з┘Д╪╣╪╕┘К┘Е╪М ╪▒╪и┘Ж╪з ┘И╪▒╪и ┘Г┘Д ╪┤┘К╪б╪М ┘Б╪з┘Д┘В ╪з┘Д╪н╪и ┘И╪з┘Д┘Ж┘И┘Й╪М ┘И┘Е┘Ж╪▓┘Д ╪з┘Д╪к┘И╪▒╪з╪й ┘И╪з┘Д╪е┘Ж╪м┘К┘Д ┘И╪з┘Д┘Б╪▒┘В╪з┘Ж╪М ╪г╪╣┘И╪░ ╪и┘Г ┘Е┘Ж ╪┤╪▒ ┘Г┘Д ╪┤┘К╪б ╪г┘Ж╪к ╪в╪о╪░ ╪и┘Ж╪з╪╡┘К╪к┘З╪М ╪з┘Д┘Д┘З┘Е ╪г┘Ж╪к ╪з┘Д╪г┘И┘Д ┘Б┘Д┘К╪│ ┘В╪и┘Д┘Г ╪┤┘К╪б╪М ┘И╪г┘Ж╪к ╪з┘Д╪в╪о╪▒ ┘Б┘Д┘К╪│ ╪и╪╣╪п┘Г ╪┤┘К╪б╪М ┘И╪г┘Ж╪к ╪з┘Д╪╕╪з┘З╪▒ ┘Б┘Д┘К╪│ ┘Б┘И┘В┘Г ╪┤┘К╪б╪М ┘И╪г┘Ж╪к ╪з┘Д╪и╪з╪╖┘Ж ┘Б┘Д┘К╪│ ╪п┘И┘Ж┘Г ╪┤┘К╪б╪М ╪з┘В╪╢ ╪╣┘Ж╪з ╪з┘Д╪п┘К┘Ж ┘И╪г╪║┘Ж┘Ж╪з ┘Е┘Ж ╪з┘Д┘Б┘В╪▒.",
    "╪и╪│┘Е ╪з┘Д┘Д┘З ┘И╪╢╪╣╪к ╪м┘Ж╪и┘К╪М ╪з┘Д┘Д┘З┘Е ╪з╪║┘Б╪▒ ┘Д┘К ╪░┘Ж╪и┘К╪М ┘И╪г╪о╪│╪ж ╪┤┘К╪╖╪з┘Ж┘К╪М ┘И┘Б┘Г ╪▒┘З╪з┘Ж┘К╪М ┘И╪з╪м╪╣┘Д┘Ж┘К ┘Б┘К ╪з┘Д┘Ж╪п┘К ╪з┘Д╪г╪╣┘Д┘Й.",
    "╪з┘Д┘Д┘З┘Е ╪г╪│┘Д┘Е╪к ┘Ж┘Б╪│┘К ╪е┘Д┘К┘Г╪М ┘И┘И╪м┘З╪к ┘И╪м┘З┘К ╪е┘Д┘К┘Г╪М ┘И┘Б┘И╪╢╪к ╪г┘Е╪▒┘К ╪е┘Д┘К┘Г╪М ┘И╪г┘Д╪м╪г╪к ╪╕┘З╪▒┘К ╪е┘Д┘К┘Г╪М ╪▒╪║╪и╪й ┘И╪▒┘З╪и╪й ╪е┘Д┘К┘Г╪М ┘Д╪з ┘Е┘Д╪м╪г ┘И┘Д╪з ┘Е┘Ж╪м╪з ┘Е┘Ж┘Г ╪е┘Д╪з ╪е┘Д┘К┘Г╪М ╪в┘Е┘Ж╪к ╪и┘Г╪к╪з╪и┘Г ╪з┘Д╪░┘К ╪г┘Ж╪▓┘Д╪к╪М ┘И╪и┘Ж╪и┘К┘Г ╪з┘Д╪░┘К ╪г╪▒╪│┘Д╪к.",
    "╪│╪и╪н╪з┘Ж ╪з┘Д┘Д┘З (33 ┘Е╪▒╪й)╪М ╪з┘Д╪н┘Е╪п ┘Д┘Д┘З (33 ┘Е╪▒╪й)╪М ╪з┘Д┘Д┘З ╪г┘Г╪и╪▒ (34 ┘Е╪▒╪й).",
    "┘Д╪з ╪е┘Д┘З ╪е┘Д╪з ╪з┘Д┘Д┘З ┘И╪н╪п┘З ┘Д╪з ╪┤╪▒┘К┘Г ┘Д┘З╪М ┘Д┘З ╪з┘Д┘Е┘Д┘Г ┘И┘Д┘З ╪з┘Д╪н┘Е╪п ┘И┘З┘И ╪╣┘Д┘Й ┘Г┘Д ╪┤┘К╪б ┘В╪п┘К╪▒.",
    "╪з┘Д┘Д┘З┘Е ╪╣╪з┘Д┘Е ╪з┘Д╪║┘К╪и ┘И╪з┘Д╪┤┘З╪з╪п╪й╪М ┘Б╪з╪╖╪▒ ╪з┘Д╪│┘Е╪з┘И╪з╪к ┘И╪з┘Д╪г╪▒╪╢╪М ╪▒╪и ┘Г┘Д ╪┤┘К╪б ┘И┘Е┘Д┘К┘Г┘З╪М ╪г╪┤┘З╪п ╪г┘Ж ┘Д╪з ╪е┘Д┘З ╪е┘Д╪з ╪г┘Ж╪к╪М ╪г╪╣┘И╪░ ╪и┘Г ┘Е┘Ж ╪┤╪▒ ┘Ж┘Б╪│┘К ┘И┘Е┘Ж ╪┤╪▒ ╪з┘Д╪┤┘К╪╖╪з┘Ж ┘И╪┤╪▒┘Г┘З."
]

QURAN_VERSES = [
    "╪е┘Р┘Ж┘О┘С ┘Е┘О╪╣┘О ╪з┘Д┘Т╪╣┘П╪│┘Т╪▒┘Р ┘К┘П╪│┘Т╪▒┘Л╪з я┤┐┘ея┤╛ ┘Б┘О╪е┘Р┘Ж┘О┘С ┘Е┘О╪╣┘О ╪з┘Д┘Т╪╣┘П╪│┘Т╪▒┘Р ┘К┘П╪│┘Т╪▒┘Л╪з я┤┐┘жя┤╛ (╪з┘Д╪┤╪▒╪н:5-6)",
    "┘И┘О┘Е┘О┘Ж ┘К┘О╪к┘О┘С┘В┘Р ╪з┘Д┘Д┘О┘С┘З┘О ┘К┘О╪м┘Т╪╣┘О┘Д ┘Д┘О┘С┘З┘П ┘Е┘О╪о┘Т╪▒┘О╪м┘Л╪з я┤┐┘вя┤╛ ┘И┘О┘К┘О╪▒┘Т╪▓┘П┘В┘Т┘З┘П ┘Е┘Р┘Ж┘Т ╪н┘О┘К┘Т╪л┘П ┘Д┘О╪з ┘К┘О╪н┘Т╪к┘О╪│┘Р╪и┘П (╪з┘Д╪╖┘Д╪з┘В:2-3)",
    "╪▒┘О┘С╪и┘Р┘С ╪г┘О╪п┘Т╪о┘Р┘Д┘Т┘Ж┘Р┘К ┘Е┘П╪п┘Т╪о┘О┘Д┘О ╪╡┘Р╪п┘Т┘В┘Н ┘И┘О╪г┘О╪о┘Т╪▒┘Р╪м┘Т┘Ж┘Р┘К ┘Е┘П╪о┘Т╪▒┘О╪м┘О ╪╡┘Р╪п┘Т┘В┘Н ┘И┘О╪з╪м┘Т╪╣┘О┘Д ┘Д┘Р┘С┘К ┘Е┘Р┘Ж ┘Д┘О┘С╪п┘П┘Ж┘Г┘О ╪│┘П┘Д┘Т╪╖┘О╪з┘Ж┘Л╪з ┘Ж┘О┘С╪╡┘Р┘К╪▒┘Л╪з (╪з┘Д╪е╪│╪▒╪з╪б:80)",
    "╪з┘Д┘Д┘О┘С┘З┘П ┘Д┘О╪з ╪е┘Р┘Д┘О┘░┘З┘О ╪е┘Р┘Д┘О┘С╪з ┘З┘П┘И┘О ╪з┘Д┘Т╪н┘О┘К┘П┘С ╪з┘Д┘Т┘В┘О┘К┘П┘С┘И┘Е┘П (╪в┘К╪й ╪з┘Д┘Г╪▒╪│┘К)",
    "┘И┘О┘Е┘О┘Ж ┘К┘О╪к┘О┘И┘О┘Г┘О┘С┘Д┘Т ╪╣┘О┘Д┘О┘Й ╪з┘Д┘Д┘О┘С┘З┘Р ┘Б┘О┘З┘П┘И┘О ╪н┘О╪│┘Т╪и┘П┘З┘П (╪з┘Д╪╖┘Д╪з┘В:3)",
    "┘Б┘О╪е┘Р┘Ж┘О┘С ╪з┘Д┘Д┘О┘С┘З┘О ┘З┘П┘И┘О ╪з┘Д┘Т╪║┘О┘Б┘П┘И╪▒┘П ╪з┘Д╪▒┘О┘С╪н┘Р┘К┘Е┘П (╪з┘Д╪н╪┤╪▒:22)",
    "┘И┘О┘В┘П┘Д ╪▒┘О┘С╪и┘Р┘С ╪г┘О┘Ж╪▓┘Р┘Д┘Т┘Ж┘Р┘К ┘Е┘П┘Ж╪▓┘О┘Д┘Л╪з ┘Е┘П┘С╪и┘О╪з╪▒┘О┘Г┘Л╪з ┘И┘О╪г┘О┘Ж╪к┘О ╪о┘О┘К┘Т╪▒┘П ╪з┘Д┘Т┘Е┘П┘Ж╪▓┘Р┘Д┘Р┘К┘Ж┘О (╪з┘Д┘Е╪д┘Е┘Ж┘И┘Ж:29)",
    "┘И┘О╪░┘О┘Г┘Р┘С╪▒┘Т ┘Б┘О╪е┘Р┘Ж┘О┘С ╪з┘Д╪░┘Р┘С┘Г┘Т╪▒┘О┘Й┘░ ╪к┘О┘Ж┘Б┘О╪╣┘П ╪з┘Д┘Т┘Е┘П╪д┘Т┘Е┘Р┘Ж┘Р┘К┘Ж┘О (╪з┘Д╪░╪з╪▒┘К╪з╪к:55)",
    "┘И┘О╪е┘Р╪░┘О╪з ╪│┘О╪г┘О┘Д┘О┘Г┘О ╪╣┘Р╪и┘О╪з╪п┘Р┘К ╪╣┘О┘Ж┘Р┘С┘К ┘Б┘О╪е┘Р┘Ж┘Р┘С┘К ┘В┘О╪▒┘Р┘К╪и┘М ╪г┘П╪м┘Р┘К╪и┘П ╪п┘О╪╣┘Т┘И┘О╪й┘О ╪з┘Д╪п┘О┘С╪з╪╣┘Р ╪е┘Р╪░┘О╪з ╪п┘О╪╣┘О╪з┘Ж┘Р (╪з┘Д╪и┘В╪▒╪й:186)",
    "┘И┘О┘Е┘О╪з ╪к┘О┘И┘Т┘Б┘Р┘К┘В┘Р┘К ╪е┘Р┘Д┘О┘С╪з ╪и┘Р╪з┘Д┘Д┘О┘С┘З┘Р ╪╣┘О┘Д┘О┘К┘Т┘З┘Р ╪к┘О┘И┘О┘Г┘О┘С┘Д┘Т╪к┘П ┘И┘О╪е┘Р┘Д┘О┘К┘Т┘З┘Р ╪г┘П┘Ж┘Р┘К╪и┘П (┘З┘И╪п:88)"
]

active_users = set()

def get_algeria_time():
    """╪з┘Д╪н╪╡┘И┘Д ╪╣┘Д┘Й ┘И┘В╪к ╪з┘Д╪м╪▓╪з╪ж╪▒ ┘Е╪╣ ╪з┘Д╪к┘Ж╪│┘К┘В"""
    now = datetime.utcnow() + timedelta(hours=1)  # UTC+1
    return now, now.strftime("%H:%M")

def get_surah_audio(surah_number):
    """╪з┘Д╪н╪╡┘И┘Д ╪╣┘Д┘Й ╪│┘И╪▒╪й ┘Г╪з┘Е┘Д╪й ╪и╪╡┘И╪к"""
    try:
        response = requests.get(f"https://api.alquran.cloud/v1/surah/{surah_number}/ar.alafasy")
        data = response.json()
        
        if data['code'] == 200:
            return {
                'name': data['data']['name'],
                'english_name': data['data']['englishName'],
                'ayahs': data['data']['ayahs']
            }
    except Exception as e:
        logger.error(f"╪о╪╖╪г ┘Б┘К ╪м┘Д╪и ╪з┘Д╪│┘И╪▒╪й: {e}")
    return None

def send_surah(update: Update, context: CallbackContext):
    """┘Е╪╣╪з┘Д╪м╪й ╪г┘Е╪▒ /sura"""
    now, time_str = get_algeria_time()
    
    if not context.args:
        update.message.reply_text(
            f"тЪая╕П ┘К╪▒╪м┘Й ╪к╪н╪п┘К╪п ╪▒┘В┘Е ╪з┘Д╪│┘И╪▒╪й (1-114)\n"
            f"┘Е╪л╪з┘Д: /sura 1",
            parse_mode="Markdown"
        )
        return
    
    try:
        surah_num = int(context.args[0])
        if not 1 <= surah_num <= 114:
            raise ValueError
    except:
        update.message.reply_text(
            "тЪая╕П ╪▒┘В┘Е ╪з┘Д╪│┘И╪▒╪й ┘К╪м╪и ╪г┘Ж ┘К┘Г┘И┘Ж ╪и┘К┘Ж 1 ┘И114",
            parse_mode="Markdown"
        )
        return
    
    surah = get_surah_audio(surah_num)
    if not surah:
        update.message.reply_text(
            "тЪая╕П ╪к╪╣╪░╪▒ ╪м┘Д╪и ╪з┘Д╪│┘И╪▒╪й╪М ╪н╪з┘И┘Д ┘Д╪з╪н┘В╪з┘Л",
            parse_mode="Markdown"
        )
        return
    
    # ╪е╪▒╪│╪з┘Д ┘Е╪╣┘Д┘И┘Е╪з╪к ╪з┘Д╪│┘И╪▒╪й ╪г┘И┘Д╪з┘Л
    update.message.reply_text(
        f"ЁЯУЦ ╪м╪з╪▒┘К ╪к╪н╪╢┘К╪▒ ╪│┘И╪▒╪й {surah['name']} ({surah['english_name']})...",
        parse_mode="Markdown"
    )
    
    # ╪е╪▒╪│╪з┘Д ┘Г┘Д ╪в┘К╪з╪к ╪з┘Д╪│┘И╪▒╪й
    for ayah in surah['ayahs']:
        try:
            context.bot.send_audio(
                chat_id=update.effective_chat.id,
                audio=ayah['audio'],
                caption=f"╪│┘И╪▒╪й {surah['name']} - ╪з┘Д╪в┘К╪й {ayah['numberInSurah']}",
                timeout=30
            )
            time.sleep(1)  # ╪к╪г╪о┘К╪▒ ╪и┘К┘Ж ╪з┘Д╪в┘К╪з╪к ┘Д╪к╪м┘Ж╪и ╪з┘Д╪н╪╕╪▒
        except Exception as e:
            logger.error(f"╪о╪╖╪г ┘Б┘К ╪е╪▒╪│╪з┘Д ╪з┘Д╪в┘К╪й {ayah['numberInSurah']}: {e}")
            continue

def start(update: Update, context: CallbackContext):
    now, time_str = get_algeria_time()
    uid = update.effective_user.id
    active_users.add(uid)
    
    start_msg = f"""
тЬи *┘Е╪▒╪н╪и╪з┘Л ╪и┘Г ┘Б┘К ╪и┘И╪к ╪з┘Д╪г╪░┘Г╪з╪▒ ┘И╪з┘Д┘В╪▒╪в┘Ж* тЬи

ЁЯХТ ╪к┘И┘В┘К╪к ╪з┘Д╪м╪▓╪з╪ж╪▒: {time_str}

ЁЯУв *┘Е┘Е┘К╪▓╪з╪к ╪з┘Д╪и┘И╪к:*
- ╪г╪░┘Г╪з╪▒ ╪з┘Д╪╡╪и╪з╪н ┘И╪з┘Д┘Е╪│╪з╪б ╪к┘Д┘В╪з╪ж┘К╪з┘Л
- ╪к┘Д╪з┘И╪з╪к ┘В╪▒╪в┘Ж┘К╪й ┘Г╪з┘Е┘Д╪й
- ╪в┘К╪з╪к ┘В╪▒╪в┘Ж┘К╪й ┘Е┘Г╪к┘И╪и╪й ┘И┘Е╪│┘Е┘И╪╣╪й

тЪбя╕П *╪з┘Д╪г┘И╪з┘Е╪▒ ╪з┘Д┘Е╪к╪з╪н╪й:*
/start - ╪╣╪▒╪╢ ╪з┘Д╪▒╪│╪з┘Д╪й ╪з┘Д╪к╪▒╪н┘К╪и┘К╪й
/quran - ╪к┘Д╪з┘И╪й ╪╣╪┤┘И╪з╪ж┘К╪й
/sura [╪▒┘В┘Е] - ╪│┘И╪▒╪й ┘Г╪з┘Е┘Д╪й (┘Е╪л╪з┘Д: /sura 1)
/adhkar - ╪░┘Г╪▒ ╪╣╪┤┘И╪з╪ж┘К
/verse - ╪в┘К╪й ┘В╪▒╪в┘Ж┘К╪й

╪к┘Е ╪к╪╖┘И┘К╪▒ ╪з┘Д╪и┘И╪к ╪и┘И╪з╪│╪╖╪й ╪о┘Д┘К┘Д
"""
    update.message.reply_text(start_msg, parse_mode="Markdown")

# ... (╪и┘В┘К╪й ╪з┘Д╪п┘И╪з┘Д ┘Г┘Е╪з ┘З┘К ┘Б┘К ╪з┘Д┘Г┘И╪п ╪з┘Д╪│╪з╪и┘В) ...

def main():
    updater = Updater(BOT_TOKEN, use_context=True)
    dp = updater.dispatcher
    
    # ╪к╪╣╪▒┘К┘Б ╪з┘Д╪г┘И╪з┘Е╪▒
    dp.add_handler(CommandHandler("start", start))
    dp.add_handler(CommandHandler("quran", send_quran_audio))
    dp.add_handler(CommandHandler("sura", send_surah))
    dp.add_handler(CommandHandler("adhkar", send_random_adhkar))
    dp.add_handler(CommandHandler("verse", send_verse_command))
    
    # ╪з┘Д╪м╪п┘И┘Д╪й
    job_queue = updater.job_queue
    job_queue.run_repeating(scheduled_jobs, interval=3600, first=0)
    
    updater.start_polling()
    updater.idle()

if __name__ == "__main__":
    main()
